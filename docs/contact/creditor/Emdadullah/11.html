<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Contract - Qari Emdadullah</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f9f9f9; }
    header { background:#004080; color:#fff; padding:10px; display:flex; align-items:center; }
    header img { height:40px; margin-right:10px; }
    main { padding:20px; max-width:900px; margin:auto; }
    .section { background:#fff; padding:15px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    h2 { border-bottom:1px solid #ddd; padding-bottom:5px; }
    .flex { display:flex; gap:20px; flex-wrap:wrap; }
    .countdown, .clock, .calculator { flex:1; min-width:250px; }
    input, select { padding:5px; margin:5px 0; width:100%; }
    button { padding:8px 12px; margin:5px; background:#004080; color:#fff; border:none; border-radius:4px; cursor:pointer; }
    button:hover { background:#0066cc; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; }
    @media(max-width:600px){ header{flex-direction:column;} }
    .hidden { display:none; }
  </style>
</head>
<body>
  <header>
    <img src="docs/assets/logo.png" alt="Logo">
    <h1>Contract Dashboard - Qari Emdadullah</h1>
  </header>
  <main>
    <div id="lockScreen" class="section">
      <h2>üîê Unlock Contract</h2>
      <input type="password" id="passwordInput" placeholder="Enter Password">
      <button onclick="unlock()">Unlock</button>
      <p id="lockMsg"></p>
    </div>

    <div id="contractContent" class="hidden">
      <div class="section flex">
        <div class="clock">
          <h2>‚è∞ Bangladesh Time</h2>
          <p id="bdClock"></p>
        </div>
        <div class="countdown">
          <h2>üìÖ Delivery Countdown</h2>
          <p>Earliest (45 days): <span id="count45"></span></p>
          <p>Maximum (60 days): <span id="count60"></span></p>
        </div>
      </div>

      <div class="section calculator">
        <h2>üí∞ Compensation Calculator</h2>
        <label>Principal Amount (Tk):</label>
        <input type="number" id="principal" value="13000">
        
        <label>Mode:</label>
        <select id="mode">
          <option value="daily">Daily Penalty</option>
          <option value="monthly">Monthly %</option>
        </select>
        
        <label>Rate (Tk/day or %/month):</label>
        <input type="number" id="rate" value="100">
        
        <p>Owed Amount: <strong id="owed">Tk 13,000</strong></p>
      </div>

      <div class="section">
        <h2>üìë Transaction Ledger</h2>
        <table id="ledger">
          <thead>
            <tr><th>Date</th><th>Amount</th><th>Method</th></tr>
          </thead>
          <tbody>
            <tr><td>2025-09-08</td><td>13,000</td><td>Cash</td></tr>
          </tbody>
        </table>
        <button onclick="downloadCSV()">Download CSV</button>
        <button onclick="copySummary()">Copy Summary</button>
        <button onclick="window.print()">Print</button>
      </div>
    </div>
  </main>

<script>
  const unlock = () => {
    const pass = document.getElementById('passwordInput').value;
    if(pass === "1820096806"){
      document.getElementById('lockScreen').classList.add('hidden');
      document.getElementById('contractContent').classList.remove('hidden');
    } else {
      document.getElementById('lockMsg').innerText = "‚ùå Wrong password!";
    }
  };

  // Real-time Bangladesh clock
  setInterval(()=>{
    const now = new Date();
    const options = { timeZone: 'Asia/Dhaka', hour:'2-digit', minute:'2-digit', second:'2-digit' };
    document.getElementById('bdClock').innerText = now.toLocaleString('bn-BD', options);
  },1000);

  // Countdown
  const startDate = new Date("2025-09-08T21:00:00+06:00");
  const day45 = new Date(startDate.getTime() + 45*24*60*60*1000);
  const day60 = new Date(startDate.getTime() + 60*24*60*60*1000);

  setInterval(()=>{
    const now = new Date();
    const diff45 = day45 - now;
    const diff60 = day60 - now;
    document.getElementById('count45').innerText = diff45>0 ? Math.floor(diff45/(1000*60*60*24))+" days left" : "Passed";
    document.getElementById('count60').innerText = diff60>0 ? Math.floor(diff60/(1000*60*60*24))+" days left" : "Elapsed "+Math.abs(Math.floor(diff60/(1000*60*60*24)))+" days";
  },1000);

  // Compensation calculator
  setInterval(()=>{
    const principal = parseFloat(document.getElementById('principal').value)||0;
    const rate = parseFloat(document.getElementById('rate').value)||0;
    const mode = document.getElementById('mode').value;
    const now = new Date();
    let owed = principal;
    if(mode==="daily"){
      if(now>day60){
        const daysLate = Math.floor((now-day60)/(1000*60*60*24));
        owed += daysLate*rate;
      }
    } else {
      if(now>day60){
        const monthsLate = (now-day60)/(1000*60*60*24*30);
        owed += principal*(rate/100)*monthsLate;
      }
    }
    document.getElementById('owed').innerText = "Tk "+owed.toFixed(2);
  },1000);

  // Ledger CSV
  function downloadCSV(){
    let csv = "Date,Amount,Method\n2025-09-08,13000,Cash\n";
    const blob = new Blob([csv],{type:"text/csv"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "ledger.csv";
    a.click();
  }

  function copySummary(){
    const summary = "Transaction: 13,000 Tk Cash on 2025-09-08. Current owed: "+document.getElementById('owed').innerText;
    navigator.clipboard.writeText(summary);
    alert("Summary copied!");
  }
</script>
</body>
</html>
